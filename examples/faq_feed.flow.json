{
  "name": "fqa_feed",
  "type": "serial",
  "description": "FAQ-based Question Answering feed flow.",
  "input": {
    "schema": {
      "input": {},
      "output": {}
    },
    "tasks": [
      {
        "name": "loop",
        "type": "loop",
        "input": {
          "iterator": {
            "name": "load_documents",
            "type": "jsonlines_loader",
            "input": {
              "filename": "../../examples/data/百度百科常见问题.jsonl",
              "pointer": "/问",
              "batch_size": 2
            }
          },
          "body": {
            "name": "loop",
            "type": "serial",
            "input": {
              "tasks": [
                {
                  "name": "calculate_embeddings",
                  "type": "call",
                  "input": {
                    "loader": "llmflow",
                    "task": "embedding",
                    "input": {
                      "model": "rocketqa-document",
                      "uri": "http://127.0.0.1:8080/embeddings",
                      "api_key": "123",
                      "texts": "${load_documents.documents[*].text}"
                    }
                  }
                },
                {
                  "name": "upsert_documents",
                  "type": "call",
                  "input": {
                    "loader": "llmflow",
                    "task": "vectorstore_upsert",
                    "input": {
                      "vendor": "memory",
                      "uri": "http://127.0.0.1:8080/vector/upsert",
                      "api_key": "123",
                      "vectors": "${calculate_embeddings.embeddings}",
                      "documents": "${load_documents.documents}"
                    }
                  }
                }
              ]
            }
          }
        }
      }
    ]
  }
}