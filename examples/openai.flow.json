{
  "name": "openai",
  "type": "serial",
  "description": "Basic flow using OpenAI's GPT-3.5 Turbo. (You need to set your OPENAI_API_KEY an environment variable.)",
  "input": {
    "schema": {
      "input": {
        "type": "object",
        "required": [
          "query"
        ],
        "properties": {
          "query": {
            "type": "string",
            "description": "The user's query."
          }
        }
      },
      "output": {
        "type": "object",
        "properties": {
          "response": {
            "type": "string",
            "description": "The assistant's response."
          }
        }
      }
    },
    "tasks": [
      {
        "name": "build_prompt",
        "type": "template",
        "input": {
          "template": "What is a good name for a company that makes {{$.product}}?",
          "args": {
            "product": "${input.query}"
          }
        }
      },
      {
        "name": "ask_llm",
        "type": "call",
        "input": {
          "loader": "llmflow",
          "task": "llm",
          "input": {
            "model": "gpt-3.5-turbo",
            "uri": "https://api.openai.com/v1/chat/completions",
            "api_key": "#{getenv(\"OPENAI_API_KEY\")}",
            "prompt": "${build_prompt.result}",
            "temperature": 0
          }
        }
      }
    ]
  }
}
